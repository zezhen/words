<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Interesting Scala | Zezhen</title><link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/css/highlights/dracula.css"><link rel="canonical" href="http://zezhen.me/posts/interesting-scala/"/>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><meta name="description" content="各种编程语言中, 对于Java是最为熟悉的, 但用久了就觉得各种不方便, 比如函数不是第一公民, 在其他程序中很方便的实现在Java里得用各种类封装, 相比之下, 用脚本语言就特别开心, 比如Python, 很是提高生产力, 可惜仅用来做做些文本处理以及搭建小的web…">
<meta property="og:type" content="article">
<meta property="og:title" content="Interesting Scala">
<meta property="og:url" content="http://zezhen.me/posts/interesting-scala/">
<meta property="og:site_name" content="Zezhen">
<meta property="og:description" content="各种编程语言中, 对于Java是最为熟悉的, 但用久了就觉得各种不方便, 比如函数不是第一公民, 在其他程序中很方便的实现在Java里得用各种类封装, 相比之下, 用脚本语言就特别开心, 比如Python, 很是提高生产力, 可惜仅用来做做些文本处理以及搭建小的web…">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://zezhen.me/img/scala-spiral.png">
<meta property="article:published_time" content="2018-07-02T07:00:00.000Z">
<meta property="article:modified_time" content="2022-05-31T07:01:19.656Z">
<meta property="article:author" content="Justin">
<meta property="article:tag" content="coding">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://zezhen.me/img/scala-spiral.png"><meta property="article:author" content="Justin"><meta property="twitter:label1" content="Published at"><meta property="twitter:data1" content="2018-07-02 00:00:00"><meta property="twitter:label2" content="Written by"><meta property="twitter:data2" content="Justin"><link rel="icon" href="/favicon.ico"><link rel="alternate" href="/atom.xml" type="application/atom+xml" title="Zezhen"><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head><body itemscope itemtype="https://schema.org/WebPage"><nav class="menu" id="menu"><div class="menu-inner"><div class="menu__left-area"><div class="menu__item"><a class="menu__item__link menu__item__link--brand" href="/" title="Home" rel="home"><img class="menu__item__link--brand__image" src="/favicon.ico" alt="Zezhen"><span class="menu__item__link--brand__label">Zezhen</span></a></div></div><div class="menu__right-area"><div class="menu__item"><a class="menu__item__link" href="/">Home</a></div><div class="menu__item"><a class="menu__item__link" href="/about">About</a></div></div></div></nav><div class="page-background"></div><div class="content-container"><div class="content-outer"><div class="content-inner" itemscope itemtype="https://schema.org/Blog"><article class="article" id="article" itemscope itemtype="https://schema.org/BlogPosting"><h1 class="article__title" itemprop="headline">Interesting Scala</h1><div class="article__meta"><time class="article__meta__time" datetime="2018-07-02T07:00:00.000Z" itemprop="datePublished">2018-07-02 00:00:00</time><div class="article__meta__categories"><a class="article__meta__categories__item" href="/categories/Tech/">Tech</a></div></div><hr><div class="article__contents"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p><img src="/img/scala-spiral.png"></p>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><p>各种编程语言中, 对于Java是最为熟悉的, 但用久了就觉得各种不方便, 比如函数不是第一公民, 在其他程序中很方便的实现在Java里得用各种类封装, 相比之下, 用脚本语言就特别开心, 比如Python, 很是提高生产力, 可惜仅用来做做些文本处理以及搭建小的web app, 并不适用大型程序. 而scala的出现则弥补了两方面的问题, 既有静态程序的编译安全, 又有动态脚本的方便灵活, 号称better Java, 或者freestyle Java. 最近略感有空, 学习一下, 记录下有趣的feature.</p>
<h2 id="Functions-vs-Methods"><a href="#Functions-vs-Methods" class="headerlink" title="Functions vs Methods"></a>Functions vs Methods</h2><p>A Scala <em>method</em>, as in Java, is a part of a class. It has a name, a signature, optionally some annotations, and some bytecode. </p>
<p>A <em>function</em> in Scala is a complete object. There are a series of traits in Scala to represent functions with various numbers of arguments: Function0, Function1, Function2, etc. As an instance of a class that implements one of these traits, a function object has methods. One of these methods is the apply method, which contains the code that implements the body of the function. </p>
<p>When we treat a method as a function, such as by assigning it to a variable, Scala actually creates a function object whose apply method calls the original method, and that is the object that gets assigned to the variable. Defining a function object and assigning it to an instance variable this way consumes more memory than just defining the functionally equivalent method because of the additional instance variable and the overhead of another object instance for the function. Thus you would not want every method to be a function; but functions give you a great deal of power that is not available with just methods, and in those situations that power is well worth the additional memory used. </p>
<p>Note the difference in the signatures between method <em>addThenMultiply</em> and function <em>func</em>, underscore <em>_</em> tells Scala to treat func as a function rather than taking the value generated by a call to that method.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">scala&gt; </span><span class="language-bash">def addThenMultiply(x: Int, y: Int)(multiplier: Int): Int = (x + y) * multiplier</span></span><br><span class="line">addThenMultiply: (x: Int, y: Int)(multiplier: Int)Int</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">scala&gt; </span><span class="language-bash">val func = addThenMultiply(1, 2) _</span></span><br><span class="line">func: Int =&gt; Int = &lt;function1&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">scala&gt; </span><span class="language-bash">func(3)</span></span><br><span class="line">res0: Int = 9</span><br></pre></td></tr></table></figure>

<p>detail refer to <a target="_blank" rel="noopener" href="http://jim-mcbeath.blogspot.com/2009/05/scala-functions-vs-methods.html">Scala Functions vs Methods</a></p>
<h2 id="Variance-and-Type-Bounds"><a href="#Variance-and-Type-Bounds" class="headerlink" title="Variance and Type Bounds"></a>Variance and Type Bounds</h2><p>Generic classes take a type as a parameter within square brackets <code>[]</code>. <code>Variance</code> is the correlation of subtyping relationships of complex types and the subtyping relationships of their component types. </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Baz</span>[<span class="type">A</span>]  <span class="comment">// An invariant class</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>[+<span class="type">A</span>] <span class="comment">// A covariant class</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span>[-<span class="type">A</span>] <span class="comment">// A contravariant class</span></span></span><br></pre></td></tr></table></figure>

<h3 id="Covariance-and-Upper-Bounds"><a href="#Covariance-and-Upper-Bounds" class="headerlink" title="Covariance and Upper Bounds"></a>Covariance and Upper Bounds</h3><p>class <code>List[+A]</code>, means that List can take any class, if B is a <em>subtype</em> of A, then <code>List[B]</code> is considered to be a <em>subtype</em> of <code>List[A]</code>. This mainly works in container, subtypes’ container is another container of supertype’s.</p>
<p>Accordingly, from type bounds perspective, the upper type bounds <code>List[B &lt;: A]</code>, it limits a type to a subtype, List will only take class B that is a subclass of A, which is similar to <code>? extends A</code> in Java.</p>
<h3 id="Contravariance-and-Lower-Bounds"><a href="#Contravariance-and-Lower-Bounds" class="headerlink" title="Contravariance and Lower Bounds"></a>Contravariance and Lower Bounds</h3><p>class <code>Writer[-A]</code>, means that Writer can take any class, if B is <em>supertype</em> of A, <code>Writer[B]</code> is a <em>subtype</em> of <code>Writer[A]</code>. This mainly works in functionality perspective, if subtype class has some functions, the supertype class should also have.</p>
<p>Accordingly, from type bounds perspective, it’s lower type boundd <code>Writer[B &gt;: A]</code>, which declares a type to be a supertype of another type, similar to <code>? super T</code> in Java.</p>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><p>Below example shows the <code>trait Node[+A]</code> defined as covariance, which means any of subtype <code>B</code>, the <code>Node[B]</code> is subtype of <code>Node[A]</code>, thus we need to guarantee that in the function <code>prepend</code>, all elem prepended should be type A or its supertype, thus we have to use lower bounds type, otherwize error <code>covariant type A occurs in contravariant position in type A of value elem</code> will raise.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Node</span>[+<span class="type">A</span>] </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">prepend</span></span>[<span class="type">U</span> &gt;: <span class="type">A</span>](elem: <span class="type">U</span>): <span class="type">Node</span>[<span class="type">U</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">ListNode</span>[+<span class="type">A</span>](<span class="params">h: <span class="type">A</span>, t: <span class="type">Node</span>[<span class="type">A</span>]</span>) <span class="keyword">extends</span> <span class="title">Node</span>[<span class="type">A</span>] </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">prepend</span></span>[<span class="type">U</span> &gt;: <span class="type">A</span>](elem: <span class="type">U</span>): <span class="type">ListNode</span>[<span class="type">U</span>] = <span class="type">ListNode</span>(elem, <span class="keyword">this</span>)</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">head</span></span>: <span class="type">A</span> = h</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">tail</span></span>: <span class="type">Node</span>[<span class="type">A</span>] = t</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Nil</span>[+<span class="type">A</span>](<span class="params"></span>) <span class="keyword">extends</span> <span class="title">Node</span>[<span class="type">A</span>] </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">prepend</span></span>[<span class="type">U</span> &gt;: <span class="type">A</span>](elem: <span class="type">U</span>): <span class="type">ListNode</span>[<span class="type">U</span>] = <span class="type">ListNode</span>(elem, <span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Implicit-X"><a href="#Implicit-X" class="headerlink" title="Implicit X"></a>Implicit X</h2><h3 id="Implicit-Parameter"><a href="#Implicit-Parameter" class="headerlink" title="Implicit Parameter"></a>Implicit Parameter</h3><p>Scala will look if it can get an implicit value of the correct type, and if it can, pass it automatically.</p>
<ol>
<li>Scala will first look for implicit definitions and implicit parameters that can be accessed directly (without a prefix) at the point the method with the implicit parameter block is called.</li>
<li>Then it looks for members marked implicit in all the companion objects associated with the implicit candidate type.</li>
</ol>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Monoid</span>[<span class="type">A</span>] </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">add</span></span>(x: <span class="type">A</span>, y: <span class="type">A</span>): <span class="type">A</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">unit</span></span>: <span class="type">A</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ImplicitTest</span> </span>&#123;</span><br><span class="line">  <span class="keyword">implicit</span> <span class="keyword">val</span> stringMonoid: <span class="type">Monoid</span>[<span class="type">String</span>] = <span class="keyword">new</span> <span class="type">Monoid</span>[<span class="type">String</span>] &#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span></span>(x: <span class="type">String</span>, y: <span class="type">String</span>): <span class="type">String</span> = x concat y</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">unit</span></span>: <span class="type">String</span> = <span class="string">&quot;&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">implicit</span> <span class="keyword">val</span> intMonoid: <span class="type">Monoid</span>[<span class="type">Int</span>] = <span class="keyword">new</span> <span class="type">Monoid</span>[<span class="type">Int</span>] &#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span></span>(x: <span class="type">Int</span>, y: <span class="type">Int</span>): <span class="type">Int</span> = x + y</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">unit</span></span>: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">sum</span></span>[<span class="type">A</span>](xs: <span class="type">List</span>[<span class="type">A</span>])(<span class="keyword">implicit</span> m: <span class="type">Monoid</span>[<span class="type">A</span>]): <span class="type">A</span> =</span><br><span class="line">    <span class="keyword">if</span> (xs.isEmpty) m.unit</span><br><span class="line">    <span class="keyword">else</span> m.add(xs.head, sum(xs.tail))</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(sum(<span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)))       <span class="comment">// uses IntMonoid implicitly</span></span><br><span class="line">    println(sum(<span class="type">List</span>(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>))) <span class="comment">// uses StringMonoid implicitly</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Implicit-Conversion"><a href="#Implicit-Conversion" class="headerlink" title="Implicit Conversion"></a>Implicit Conversion</h3><p>The concept is very similar to design pattern <code>adaptor</code>, which convert a type <code>S</code> to <code>T</code>, see below examples.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scala.language.implicitConversions</span><br><span class="line"></span><br><span class="line"><span class="keyword">implicit</span> <span class="function"><span class="keyword">def</span> <span class="title">list2ordered</span></span>[<span class="type">A</span>](x: <span class="type">List</span>[<span class="type">A</span>])</span><br><span class="line">    (<span class="keyword">implicit</span> elem2ordered: <span class="type">A</span> =&gt; <span class="type">Ordered</span>[<span class="type">A</span>]): <span class="type">Ordered</span>[<span class="type">List</span>[<span class="type">A</span>]] =</span><br><span class="line">  <span class="keyword">new</span> <span class="type">Ordered</span>[<span class="type">List</span>[<span class="type">A</span>]] &#123; </span><br><span class="line">    <span class="comment">//replace with a more useful implementation</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">compare</span></span>(that: <span class="type">List</span>[<span class="type">A</span>]): <span class="type">Int</span> = <span class="number">1</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h3 id="Implicit-Class"><a href="#Implicit-Class" class="headerlink" title="Implicit Class"></a>Implicit Class</h3><p>Below example creates the implicit class IntWithTimes. This class wraps an Int value and provides a new method, times. To use this class, just import it into scope and call the times method.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">object Helpers &#123;							// must be defined inside of another trait/class/object</span><br><span class="line">  implicit class IntWithTimes(x: Int) &#123;		// only take one non-implicit argument</span><br><span class="line">    def times[A](f: =&gt; A): Unit = &#123;</span><br><span class="line">      def loop(current: Int): Unit =</span><br><span class="line">        if(current &gt; 0) &#123;</span><br><span class="line">          f</span><br><span class="line">          loop(current - 1)</span><br><span class="line">        &#125;</span><br><span class="line">      loop(x)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">scala&gt; </span><span class="language-bash">import Helpers._</span></span><br><span class="line">import Helpers._</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">scala&gt; </span><span class="language-bash">3 <span class="built_in">times</span> println(<span class="string">&quot;HI&quot;</span>)</span></span><br><span class="line">HI</span><br><span class="line">HI</span><br><span class="line">HI</span><br></pre></td></tr></table></figure>


<h2 id="Sugars"><a href="#Sugars" class="headerlink" title="Sugars"></a>Sugars</h2><h3 id="Extractor-Objects"><a href="#Extractor-Objects" class="headerlink" title="Extractor Objects"></a>Extractor Objects</h3><p>An extractor object is an object with an unapply method. Whereas the apply method is like a constructor which takes arguments and creates an object, the unapply takes an object and tries to give back the arguments. </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scala.util.<span class="type">Random</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">CustomerID</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>(name: <span class="type">String</span>) = <span class="string">s&quot;<span class="subst">$name</span>--<span class="subst">$&#123;Random.nextLong&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">unapply</span></span>(customerID: <span class="type">String</span>): <span class="type">Option</span>[<span class="type">String</span>] = &#123;</span><br><span class="line">    <span class="keyword">val</span> stringArray: <span class="type">Array</span>[<span class="type">String</span>] = customerID.split(<span class="string">&quot;--&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> (stringArray.tail.nonEmpty) <span class="type">Some</span>(stringArray.head) <span class="keyword">else</span> <span class="type">None</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> customer1ID = <span class="type">CustomerID</span>(<span class="string">&quot;Sukyoung&quot;</span>)  <span class="comment">// Sukyoung--23098234908</span></span><br><span class="line">customer1ID <span class="keyword">match</span> &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="type">CustomerID</span>(name) =&gt; println(name)  <span class="comment">// prints Sukyoung</span></span><br><span class="line">  <span class="keyword">case</span> _ =&gt; println(<span class="string">&quot;Could not extract a CustomerID&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="By-Name-Parameters"><a href="#By-Name-Parameters" class="headerlink" title="By-Name Parameters"></a>By-Name Parameters</h3><p>By-name parameters are only evaluated when used.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calculate1</span></span>(flag: <span class="type">Boolean</span>, expr: =&gt; <span class="type">Int</span>) : <span class="type">Int</span> = &#123;</span><br><span class="line">  <span class="keyword">if</span>(flag) expr * <span class="number">37</span> <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calculate2</span></span>(flag: <span class="type">Boolean</span>, expr: <span class="type">Int</span>) : <span class="type">Int</span> = &#123;</span><br><span class="line">  <span class="keyword">if</span>(flag) expr * <span class="number">37</span> <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">expr</span></span>() : <span class="type">Int</span> = &#123;</span><br><span class="line">  println(<span class="string">&quot;execute method expr&quot;</span>)</span><br><span class="line">  <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">println(calculate1(<span class="literal">false</span>, expr()))	<span class="comment">// 0</span></span><br><span class="line">println(calculate2(<span class="literal">false</span>, expr()))	<span class="comment">// execute method expr 0</span></span><br></pre></td></tr></table></figure>
</div><div class="article__tags"><a class="article__tags__item" href="/tags/coding/">coding</a></div><div class="article__author" itemscope itemprop="author" itemtype="https://schema.org/Person"><img class="article__author__image" src="/favicon.ico" alt="Justin"><a class="article__author__link" title="About Justin" rel="author">Justin</a><p class="article__author__desc">Be different and Make a difference</p><div class="article__author__socials"><a class="article__author__socials__item" href="/atom.xml" title="rss" target="_blank"><i class="fa fa-rss"></i></a></div><meta itemprop="name" content="Justin"></div><div class="sharer" id="sharer"><div class="sharer-inner"><div class="sharer__right"><button class="sharer__item" id="sharer-facebook"><i class="fa fa-facebook-official"></i></button><button class="sharer__item" id="sharer-twitter"><i class="fa fa-twitter"></i></button><button class="sharer__item" id="sharer-pinterest"><i class="fa fa-pinterest"></i></button><button class="sharer__item" id="sharer-pocket"><i class="fa fa-get-pocket"></i></button></div></div></div><!-- Disqus Code--><div id="disqus_thread"></div><script>(function() {
  var d = document, s = d.createElement('script');
  s.src = '//zezhen.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();</script><noscript>Enable JavaScript to see comments.</noscript><!-- Meta Tags for Structured Data--><meta itemprop="dateModified" content="2022-05-31T07:01:19.656Z"><meta itemprop="articleBody" content="
各种编程语言中, 对于Java是最为熟悉的, 但用久了就觉得各种不方便, 比如函数不是第一公民, 在其他程序中很方便的实现在Java里得用各种类封装, 相比之下, 用脚本语言就特别开心, 比如Python, 很是提高生产力, 可惜仅用来做做些文本处理以及搭建小的web app, 并不适用大型程序. 而scala的出现则弥补了两方面的问题, 既有静态程序的编译安全,..."><meta itemprop="url" content="http://zezhen.me/posts/interesting-scala/"><meta itemprop="mainEntityOfPage" content="http://zezhen.me/posts/interesting-scala/"><div itemscope itemtype="https://schema.org/Organization" itemprop="publisher"><meta itemprop="name" content="Zezhen"><div itemscope itemprop="logo" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="http://zezhen.me/favicon.ico"></div></div><div itemscope itemtype="https://schema.org/ImageObject" itemprop="image"><meta itemprop="contentUrl" content="http://zezhen.me/images/default.jpg"><meta itemprop="url" content="http://zezhen.me/images/default.jpg"><meta itemprop="width" content="1280"><meta itemprop="height" content="720"></div></article><section class="related-posts"><h3>Related posts</h3><div class="related-posts__item__wrapper"><a class="related-posts__item" href="/posts/java-code-standards/"><div class="related-posts__item__background" style="background-image:url('/images/default.jpg');"></div><div class="related-posts__item__overlay"></div><span class="related-posts__item__title">Java Code Standards</span></a></div><div class="related-posts__item__wrapper"><a class="related-posts__item" href="/posts/primality-test/"><div class="related-posts__item__background" style="background-image:url('/images/default.jpg');"></div><div class="related-posts__item__overlay"></div><span class="related-posts__item__title">Primality Test</span></a></div><div class="related-posts__item__wrapper"><a class="related-posts__item" href="/posts/find-all-divisors-of-a-natural-number/"><div class="related-posts__item__background" style="background-image:url('/images/default.jpg');"></div><div class="related-posts__item__overlay"></div><span class="related-posts__item__title">Find all divisors of a natural number</span></a></div></section></div></div></div><footer id="footer"><div class="widgets"><div class="widgets-inner"><!-- Jade doesn't support dynamic inclusion with `each`.--><!-- So, I just hard coded the file names that will be included.--><div class="widgets__item"><h3 class="widgets__item__heading">Archives</h3><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/">2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/">2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">2017</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/">2016</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/">2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/">2013</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/">2010</a><span class="archive-list-count">2</span></li></ul><!--| !{list_archives({ type: 'monthly', format: theme.dateformat || 'MMMM YYYY' })}--></div><div class="widgets__item"><h3 class="widgets__item__heading">Categories</h3><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Career/">Career</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Miscs/">Miscs</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tech/">Tech</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%97%85%E6%B8%B8/">旅游</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E8%AE%B0/">杂记</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%98%85%E8%AF%BB/">阅读</a><span class="category-list-count">12</span></li></ul></div><div class="widgets__item"><h3 class="widgets__item__heading">Tag cloud</h3><div class="tag-cloud"><a href="/tags/bigdata/" style="font-size: 0.75rem;">bigdata</a> <a href="/tags/career/" style="font-size: 1.25rem;">career</a> <a href="/tags/china/" style="font-size: 0.88rem;">china</a> <a href="/tags/coding/" style="font-size: 1.38rem;">coding</a> <a href="/tags/communication/" style="font-size: 1.13rem;">communication</a> <a href="/tags/culture/" style="font-size: 1rem;">culture</a> <a href="/tags/education/" style="font-size: 0.75rem;">education</a> <a href="/tags/essay/" style="font-size: 0.75rem;">essay</a> <a href="/tags/food/" style="font-size: 0.75rem;">food</a> <a href="/tags/hadoop/" style="font-size: 0.75rem;">hadoop</a> <a href="/tags/hidden/" style="font-size: 0.75rem;">hidden</a> <a href="/tags/history/" style="font-size: 1rem;">history</a> <a href="/tags/howto/" style="font-size: 1.25rem;">howto</a> <a href="/tags/human/" style="font-size: 0.88rem;">human</a> <a href="/tags/hunman/" style="font-size: 0.75rem;">hunman</a> <a href="/tags/java/" style="font-size: 0.75rem;">java</a> <a href="/tags/leadership/" style="font-size: 0.75rem;">leadership</a> <a href="/tags/life/" style="font-size: 0.75rem;">life</a> <a href="/tags/linux/" style="font-size: 0.88rem;">linux</a> <a href="/tags/love/" style="font-size: 0.75rem;">love</a> <a href="/tags/math/" style="font-size: 1rem;">math</a> <a href="/tags/miscs/" style="font-size: 0.75rem;">miscs</a> <a href="/tags/movie/" style="font-size: 0.75rem;">movie</a> <a href="/tags/music/" style="font-size: 0.75rem;">music</a> <a href="/tags/nature/" style="font-size: 0.75rem;">nature</a> <a href="/tags/people/" style="font-size: 1.38rem;">people</a> <a href="/tags/personality/" style="font-size: 0.75rem;">personality</a> <a href="/tags/plan/" style="font-size: 0.75rem;">plan</a> <a href="/tags/scratch/" style="font-size: 0.75rem;">scratch</a> <a href="/tags/self/" style="font-size: 1.38rem;">self</a> <a href="/tags/social/" style="font-size: 1rem;">social</a> <a href="/tags/stuff/" style="font-size: 0.75rem;">stuff</a> <a href="/tags/summary/" style="font-size: 1.5rem;">summary</a> <a href="/tags/system/" style="font-size: 0.88rem;">system</a> <a href="/tags/thinking/" style="font-size: 0.75rem;">thinking</a> <a href="/tags/travel/" style="font-size: 0.75rem;">travel</a> <a href="/tags/unittest/" style="font-size: 0.75rem;">unittest</a></div></div></div></div><p class="copyright"><small>© 2022 Justin<br>Powered by <a href="https://hexo.io" rel="external" target="_blank">Hexo</a>, Theme by <a href="https://github.com/HyunSeob/hexo-theme-overdose" rel="external" target="_blank">Overdose</a></small></p></footer><script src="/js/sharer.min.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end --></body></html>